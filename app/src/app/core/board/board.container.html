<div class="board-container">
    <div
        class="board"
        [ngStyle]="{'width': boardSizeSig() + 'px', 'height': boardSizeSig() + 'px'}"
    >
        <div class="board-tiles">
            @for (tile of boardTilesSig(); track $index) {
                <!-- Since our positions are correctly ordered in a 1D array, the corrisponding index will be the correct position for the tile -->
                @if (tile?.piece?.type !== PieceType.Empty) {
                    <app-piece
                        #sq
                        [piece]="tile.piece"
                        [piecePos]="$index"
                        [square]="tile.square"
                        [isWhite]="tile.isWhite"
                        [attr.name]="tile.squareName"
                    >
                    </app-piece>
                }
                <!-- <app-square
                    #sq
                    [squarePos]="$index"
                    [square]="tile.square"
                    [isWhite]="tile.isWhite"
                    [attr.name]="tile.squareName"
                    (squareClicked)="squareClicked($event)"
                >
                </app-square> -->
            }
        </div>
        <app-coords
            [isWhiteView]="store.isWhiteView()"
            [isRank]="true"
        ></app-coords>
        <app-coords [isWhiteView]="store.isWhiteView()"></app-coords>
    </div>
    <div class="board-details">
        <div class="controlls">
            <button (click)="removeBoardSize()">Down</button>
            <button (click)="addBoardSize()">Up</button>
            <button (click)="resetFen()">Reset Fen</button>
            <button (click)="flipBoard()">Flip</button>
            <!-- TODO: Check this line again it used to be givenFen -->
            <input type="text" name="givenFen" [(ngModel)]="userFen" />
            <button (click)="setFen()">Set Fen</button>
        </div>
    </div>
</div>
